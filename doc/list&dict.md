# 列表和字典

## 列表

列表是可变序列，通常用于存放同类项目的集合。

下面是常用的列表字面量和操作：

```python
L = [] # 空列表
L = [123, 'abc', 1.23, {}] # 四项，索引为0到3
L = ['Bob', 40.0, ['dev', 'mgr']] # 嵌套的子列表
L = list('spam') # 一个可迭代对象元素的列表
L = list(range(-4, 4)) # 连续整数的列表
L[i] # 索引
L[i][j] # 索引的索引
L[i:j] # 分片
len(L) # 求长度
L1 + L2 # 拼接
L * 3 # 重复
for x in L: print(x) # 迭代
3 in L # 成员关系
L.append(4) # 尾部添加
L.extend([5,6,7]) # 尾部扩展
L.insert(i, x) # 插入
L.index(x) # 索引
L.count(x) # 统计元素出现次数
L.sort() # 排序
L.reverse() # 反转
L.copy() # 复制（python3.3及以上）
L.clear() # 清除（python3.3及以上）
L.pop(i) # 删除i处元素，并将其返回
L.remove(x) # 删除元素x
del L[i] # 删除i处元素
del L[i:j] # 删除i到j处的片段
L[i:j] = [] # 删除i到j的片段
L[i] = 3 # 索引赋值
L[i:j] = [4, 5, 6] # 分片赋值
L = [x**2 for x in range(5)] # 列表推导和映射（见第4章，第14章和第20章）
list(map(ord, 'spam'))
```

### 列表的实际应用

* 列表是序列，和字符串一样也有 `+` 和 `*` 操作，代表拼接和重复，结果是一个新的列表：

```python
len([1, 2, 3])
3

[1, 2, 3] + [4, 5, 6]
[1, 2, 3, 4, 5, 6]

['Ni!'] * 4
['Ni!', 'Ni!', 'Ni!', 'Ni!']
```

`+` 两边必须是相同类型的序列，否则会出现类型错误。

* 列表推导只是通过对序列中每一项应用一个表达式来构建一个新的列表：

```python
res = [c * 4 for c in 'SPAM']
res
['SSSS', 'PPPP', 'AAAA', 'MMMM']
```

内置函数 map 能实现类似的效果：

```python
list(map(abs, [-1, -2, 0, 1, 2]))
[1, 2, 0, 1, 2]
```

* 列表索引操作返回指定偏移处的对象，而列表分片会返回新的列表

```python
L = ['spam', 'Spam', 'SPAM!']
L[2]
'SPAM!'

L[-2]
'Spam'

L[1:]
['Spam', 'SPAM!']
```

* 索引赋值和分片赋值都是原位置修改，直接对原列表修改而不生成新的。

```python
L = ['spam', 'Spam', 'SPAM!']
L[1] = 'eggs'

L
['spam', 'Spam', 'SPAM!']

L[0:2] = ['eat', 'more']
L
['eat', 'more', 'SPAM!']
```

分片赋值最好分成两步来理解：

1. 删除。删除等号左边指定的分片。
2. 插入。将等号右边可迭代对象中的片段插入旧分片被删除的位置

```python
L = [1, 2, 3]
L[1:2] = [4, 5] # 删除元素后插入新元素
L
[1, 4, 5, 3]

L[1:1] = [6, 7]
L
[1, 6, 7, 4, 5, 3]

L[1:2] = []
L
[1, 7, 4, 5, 3]
```